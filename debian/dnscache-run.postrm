#!/bin/sh
set -e

test "$1" = 'purge' || exit 0

sv force-stop /etc/sv/dnscache || :
rm -rf /etc/sv/dnscache
rm -rf /var/lib/supervise/dnscache /var/lib/supervise/dnscache.log
for i in '@*' current config lock state; do
  rm -f /var/log/dnscache/$i
done
rmdir /var/log/dnscache || :
for i in Gdnscache Gdnslog; do
  ! getent passwd $i >/dev/null ||
    userdel $i || :
done
